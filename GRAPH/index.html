<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POVMap Prototype</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>

<!-- Contenitore per il grafico D3 per la funzionalità di zoom -->
<div id="graph-container">
  <svg>
    <defs>
        <marker id="arrow-positive" viewBox="0 -5 10 10" refX="20" refY="0"
            markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0,-5L10,0L0,5" fill="green" />
        </marker>
        <marker id="arrow-negative" viewBox="0 -5 10 10" refX="20" refY="0"
            markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0,-5L10,0L0,5" fill="red" />
        </marker>
        <marker id="arrow-ambiguous" viewBox="0 -5 10 10" refX="20" refY="0"
            markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0,-5L10,0L0,5" fill="orange" />
        </marker>
        <marker id="arrow-undefined" viewBox="0 -5 10 10" refX="20" refY="0"
            markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0,-5L10,0L0,5" fill="#c9c9c9ff" />
        </marker>
    </defs>
    <!-- Un elemento <g> per raggruppare tutti gli elementi del grafico e applicare lo zoom -->
    <g id="zoom-group"></g>
  </svg>
</div>

<!-- Timeline filtro stagioni -->
<div id="season-timeline">
  <span style="font-size: 13px; font-weight: 600; margin-bottom: 5px; font-family: 'Poppins', sans-serif;"><strong>Chapters</strong></span>
  <div id="season-dots">
    <!-- I dot saranno generati da JS -->
  </div>
</div>

<!-- Box plot per dialoghi (stile migliorato nel CSS) -->
<div id="dialogue-box" class="dialogue-box">
  <div class="dialogue-header">
    <span class="dialogue-title">Dialogue</span>
    <button class="close-btn" onclick="document.getElementById('dialogue-box').classList.remove('visible')">×</button>
  </div>
  <div class="dialogue-content"></div>
</div>

<!-- Legenda -->
<div id="legend" class="legend">
  <span style="font-size: 13px; font-weight: 600; margin-bottom: 10px; font-family: 'Poppins', sans-serif;">Links</span>
  <div><span style="background:#4CAF50; font-family: 'Poppins', sans-serif;"></span> positive</div>
  <div><span style="background:#F44336; font-family: 'Poppins', sans-serif;"></span> negative</div>
  <div><span style="background:#FFC107; font-family: 'Poppins', sans-serif;"></span> ambiguous</div>
  <div><span style="background:#c9c9c9ff; font-family: 'Poppins', sans-serif;"></span> undefined</div>
</div>

<div id="tooltip" class="hidden"></div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="graph.js"></script>

<!-- Toggle Switch -->
<div class="page-toggle">
    <label class="toggle-label">Switch View</label>
    <label class="switch">
        <input type="checkbox" id="pageToggle" checked>
        <span class="slider"></span>
    </label>
    <div class="toggle-labels">
        <span>Chords Diagram</span>
    </div>
</div>

<div class="content-below-graph">
  <h2>Informazioni Aggiuntive sul Progetto</h2>
  <p>Questa sezione può contenere note, analisi, o qualsiasi altro tipo di informazione relativa alla visualizzazione dei dati.</p>
  <p>Lo scorrimento della pagina ora è abilitato, mentre il grafo e i suoi controlli rimangono visibili e interattivi nella parte superiore.</p>
</div>

</body>
</html>